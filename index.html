<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Powered Fitness System</title>
    <link rel="stylesheet" href="style.css" />

    <style>
      .auth-buttons {
        display: flex;
        gap: 10px;
        margin-left: 20px;
      }

      .btn {
        padding: 8px 16px;
        border-radius: 6px;
        border: none;
        cursor: pointer;
        font-weight: bold;
        text-decoration: none;
        transition: 0.3s;
      }

      .login-btn {
        background: #00c6ff;
        color: white;
      }
      .register-btn {
        background: #ff416c;
        color: white;
      }
      .dashboard-btn {
        background: #28a745;
        color: white;
      }
      .admin-btn {
        background: #ff4b2b;
        color: white;
      }

      .btn:hover {
        opacity: 0.85;
        transform: scale(1.05);
      }
    </style>
  </head>

  <body>
    <nav>
      <div class="logo">Fit Club</div>

      <div class="nav-buttons">
        <!-- Buttons -->
        <button
          class="btn login"
          id="loginBtn"
          onclick="location.href = 'pages/login.html'"
        >
          Login
        </button>

        <button
          class="btn register"
          id="registerBtn"
          onclick="location.href = 'pages/register.html'"
        >
          Register
        </button>

        <button
          class="btn dashboard"
          id="dashboardBtn"
          onclick="location.href = 'pages/dashboard.html'"
        >
          Dashboard
        </button>

        <button
          class="btn admin"
          id="adminBtn"
          onclick="location.href = 'pages/admin.html'"
        >
          Admin
        </button>

        <button class="btn logout" id="logoutBtn" style="display: none">
          Logout
        </button>
      </div>
    </nav>

    <main>
      <h1 class="bgtext">AI Powered Fitness System</h1>
    </main>

    <script src="script.js"></script>

    <!-- âœ… UPDATED LOGIN STATE SCRIPT -->
    <script>
      const token = localStorage.getItem("token");

      const loginBtn = document.getElementById("loginBtn");
      const registerBtn = document.getElementById("registerBtn");
      const dashboardBtn = document.getElementById("dashboardBtn");
      const adminBtn = document.getElementById("adminBtn");
      const logoutBtn = document.getElementById("logoutBtn");

      if (token) {
        // AFTER LOGIN
        loginBtn.style.display = "none";
        registerBtn.style.display = "none";
        adminBtn.style.display = "none";

        dashboardBtn.style.display = "inline-block";
        logoutBtn.style.display = "inline-block";
      } else {
        // BEFORE LOGIN
        loginBtn.style.display = "inline-block";
        registerBtn.style.display = "inline-block";
        dashboardBtn.style.display = "inline-block";
        adminBtn.style.display = "inline-block";

        logoutBtn.style.display = "none";
      }

      // Logout
      logoutBtn.addEventListener("click", function () {
        localStorage.removeItem("token");
        localStorage.removeItem("username");
        window.location.href = "index.html";
      });

      const role = localStorage.getItem("role");

      if (token) {
        loginBtn.style.display = "none";
        registerBtn.style.display = "none";

        dashboardBtn.style.display = "inline-block";
        logoutBtn.style.display = "inline-block";

        if (role === "admin") {
          adminBtn.style.display = "inline-block";
        } else {
          adminBtn.style.display = "none";
        }
      }
    </script>
  </body>
</html>
